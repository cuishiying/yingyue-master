<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>用户详情</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- VENDOR CSS -->
    <link rel="stylesheet" th:href="@{/static/assets/vendor/bootstrap/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/static/assets/vendor/font-awesome/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/static/assets/vendor/linearicons/style.css}">
    <!-- MAIN CSS -->
    <link rel="stylesheet" th:href="@{/static/assets/css/main.css}">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" th:href="@{/static/assets/css/demo.css}">
    <link rel="stylesheet" th:href="@{/static/assets/vendor/datetimepicker/css/jquery.datetimepicker.css}">

    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76" th:href="@{/static/assets/img/apple-icon.png}">
    <link rel="icon" type="image/png" sizes="96x96" th:href="@{/static/assets/img/favicon.png}">
</head>

<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <nav th:replace="common/fragment :: navbar"></nav>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <nav th:replace="common/fragment :: sidebar-nav"></nav>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <div class="panel panel-profile">
                    <div class="clearfix">
                        <!-- LEFT COLUMN -->
                        <div class="profile-left">
                            <!-- PROFILE HEADER -->
                            <div class="profile-header">
                                <div class="overlay"></div>
                                <div class="profile-main">
                                    <img th:src="${admin.headImg}"  class="img-circle" alt="Avatar" style="width: 77px;height: 77px">
                                    <h3 class="name" th:text="${admin.adminName}">Samuel Gold</h3>
                                    <span class="online-status status-available" th:text="${admin.accountNumber}">Available</span>
                                </div>
                                <!--<div class="profile-stat">-->
                                    <!--<div class="row">-->
                                        <!--<div class="col-md-4 stat-item">-->
                                            <!--45 <span>Projects</span>-->
                                        <!--</div>-->
                                        <!--<div class="col-md-4 stat-item">-->
                                            <!--15 <span>Awards</span>-->
                                        <!--</div>-->
                                        <!--<div class="col-md-4 stat-item">-->
                                            <!--2174 <span>Points</span>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                <!--</div>-->
                            </div>
                            <!-- END PROFILE HEADER -->
                            <!-- PROFILE DETAIL -->
                            <div class="profile-detail">
                                <div class="profile-info">
                                    <h4 class="heading">基本信息</h4>
                                    <ul class="list-unstyled list-justify">
                                        <li>电话 <span th:text="${admin.phone}"></span></li>
                                        <li>QQ <span th:text="${admin.qqNumber}"></span></li>
                                        <li>微信 <span th:text="${admin.weixin}">samuel@mydomain.com</span></li>
                                        <li>生日 <span th:text="${admin.birth}">samuel@mydomain.com</span></li>
                                        <li>邮箱 <span><a href="#" th:text="${admin.email}">www.themeineed.com</a></span></li>
                                    </ul>

                                </div>
                                <div class="profile-info">
                                    <h4 class="heading">分享</h4>
                                    <ul class="list-inline social-icons">
                                        <li><a href="#" class="facebook-bg"><i class="fa fa-facebook"></i></a></li>
                                        <li><a href="#" class="twitter-bg"><i class="fa fa-twitter"></i></a></li>
                                        <li><a href="#" class="google-plus-bg"><i class="fa fa-google-plus"></i></a></li>
                                        <li><a href="#" class="github-bg"><i class="fa fa-github"></i></a></li>
                                    </ul>
                                </div>
                                <div class="profile-info">
                                    <h4 class="heading">备注</h4>
                                    <p></p>
                                </div>
                                <!--<div class="text-center"><a th:href="@{/admin/edit/}+${admin?.id}" class="btn btn-primary">Edit Profile</a></div>-->
                            </div>
                            <!-- END PROFILE DETAIL -->
                        </div>
                        <!-- END LEFT COLUMN -->
                        <!-- RIGHT COLUMN -->
                        <div class="profile-right">
                            <h4 class="heading">更新信息</h4>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h2><i class="fa fa-heart-o red"></i><strong>个人资料</strong></h2>
                                </div>
                                <div class="panel-body">
                                    <form class="form-vertical hover-stripped" id="updateForm">
                                        <div class="form-group">
                                            <label class="control-label">帐号</label>
                                            <input type="text" class="form-control"  th:value="${admin.accountNumber}" disabled>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">姓名</label>
                                            <input type="text" class="form-control" th:value="${admin.adminName}" id="adminName">
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">电话</label>
                                            <input type="number" class="form-control" th:value="${admin.phone}" id="phone">
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">QQ</label>
                                            <input type="text" class="form-control" th:value="${admin.qqNumber}" id="qqNumber">
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">微信</label>
                                            <input type="text" class="form-control" th:value="${admin.weixin}" id="weixin">
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">生日</label>
                                            <input type="text" class="form-control" th:value="${admin.birth}" id="birth">
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">邮箱</label>
                                            <input type="text" class="form-control" th:value="${admin.email}" id="email">
                                        </div>
                                        <div class="form-group" style="display: none">
                                            <label class="control-label">头像</label>
                                            <img src="" id="headImg">
                                        </div>
                                        <div class="form-group pull-right">
                                            <button type="button" class="btn btn-primary headImg-upload">上传头像</button>
                                            <button type="button" class="btn btn-primary save">更新</button>
                                        </div>
                                    </form>
                                    <form id="headImg-form" enctype="multipart/form-data">
                                        <input id="uploadImg" type="file" name="file" accept="image/jpg,image/jpge,image/png" style="display: none">
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- END RIGHT COLUMN -->
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <div class="clearfix"></div>
    <footer>
        <div class="container-fluid">
            <!--<p class="copyright">&copy; 2017 <a href="#" target="_blank">Theme I Need</a>. All Rights Reserved. More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></p>-->
        </div>
    </footer>
</div>
<!-- END WRAPPER -->
<!-- Javascript -->
<script th:src="@{/static/assets/vendor/jquery/jquery.js}"></script>
<script th:src="@{/static/assets/vendor/jquery-form/jquery.form.js}"></script>
<script th:src="@{/static/assets/vendor/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{/static/assets/vendor/jquery-validation/jquery.validate.min.js}"></script>
<script th:src="@{/static/assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
<script th:src="@{/static/assets/scripts/klorofil-common.js}"></script>
<script th:src="@{/static/assets/vendor/datetimepicker/js/jquery.datetimepicker.full.js}"></script>
<script th:src="@{/static/assets/utils/httpUtils.js}"></script>

<script type="text/javascript" th:inline="javascript">
    var ctx = /*[[@{/}]]*/;
    var id = /*[[${admin.id}]]*/;

    $('#birth').datetimepicker({
        lang:"ch", //语言选择中文 注：旧版本 新版方法：$.datetimepicker.setLocale('ch');
        format:"Y-m-d",      //格式化日期
        timepicker:false,    //关闭时间选项
        yearStart:2000,     //设置最小年份
        yearEnd:2050,        //设置最大年份
        todayButton:true    //关闭选择今天按钮
    });

    $(".save").click(function () {
        var admin = {};
        admin.adminName = $("#adminName").val();
        admin.phone = $("#phone").val();
        admin.email = $("#email").val();
        admin.qqNumber = $("#qqNumber").val();
        admin.weixin = $("#weixin").val();
        admin.birth = $("#birth").val();
        admin.headImg = $("#headImg").attr("src");
        httpUtils.postJson(ctx + "admin/edit/" + id,admin,function(e){
            if (e.success) {
                alert(e.data);
                window.location.reload();
            } else {
                alert(e.message);
            }
        });

    });

    //点击名片
    $(".headImg-upload").bind("click", function(e) {
        $("#uploadImg").trigger("click").unbind("change").bind("change",function () {
            if (!this.value) return;
            $(this).parent().ajaxSubmit({
                url: ctx + "upload/uploadImg",
                type: "post",
                beforeSend: function() {

                },
                success:function (result){
                    console.log(result)
                    if (result.success){
                        $(".img-circle").attr("src",result.data);
                        $("#headImg").attr("src",result.data);
                    }else{
                        alert(result.message);
                    }
                }, error: function(error) {
                    alert("出错啦");
                }
            });
        });
    })

</script>
</body>
</html>
